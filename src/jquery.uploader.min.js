void 0!==typeof jQuery&&function(g){g.fn.uploader=function(h){function r(b){b.preventDefault();b.stopPropagation();return a.onDragLeave()}function s(b){b.preventDefault();b.stopPropagation();return a.onDragEnter()}function t(b){b.preventDefault();b.stopPropagation();return a.onDragOver()}function u(b){b.preventDefault();b.stopPropagation();n(b.originalEvent.dataTransfer.files);return a.onDrop()}function p(){a.thumbnails&&(d=a.thumbnails.div.find('[data-upload-status="waiting"]:first'),d.attr("data-upload-status",
"uploading"),d.append(g('<div class="progress" />').append(g("<div />"))))}function v(b){b.lengthComputable&&((!d||0==d.length)&&p(),d&&d.find(".progress > div").width(100*b.loaded/b.total+"%"));return a.onUploadProgress(b)}function w(b){j=!0;d&&(d.find(".progress > div").width("100%"),d=null);a.afterUpload(b.target.response);k()}function q(){j=!0;d=null;a.error("upload failed");k()}function x(){j=!0;d=null;a.error("upload canceled");k()}function k(){if(j&&0<l.length){file=l.shift();j=!1;var b=file;
if(c.upload&&a.beforeUpload()){var g=new FormData;g.append("file",b);c.open("POST",a.url);c.upload.addEventListener("progress",v,!1);c.addEventListener("loadstart",p,!1);c.addEventListener("load",w,!1);c.addEventListener("error",q,!1);c.addEventListener("abort",x,!1);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send(g)}}}function y(b){b.preventDefault();b.stopPropagation();n(b.target.files);return a.onFilesSelected()}function n(b){if(window.File&&window.FileReader&&window.FileList&&window.FormData)for(var d=
    null,c=0;c<b.length;c++){if(0<a.maxFileSize&&file.size>a.maxFileSize)return a.error("the file you are trying to upload is too big");if(d=!a.allowDuplicate)a:{d=b[c];for(i in m)if(f=m[i],d.name==f.name&&d.size==f.size&&d.type==f.type){d=!0;break a}d=!1}if(d)return a.error("the file you are trying to upload has already been sent");a.thumbnails&&(d=new FileReader,d.onload=function(b){b=b.target.result;var e=new Image;e.src=b;g(e).hide();var d=g("<div />").attr("data-upload-status","waiting").css({overflow:"hidden",
    position:"relative"}).append(e);e.onload=function(){var b=a.thumbnails.width,c=a.thumbnails.height,h=e.width/e.height;a.thumbnails.crop&&0<b&&0<c?(d.width(b),d.height(c),g(e).css("position","absolute"),b/c>h?"zoom"==a.thumbnails.crop?(e.width=b,e.height=b/h,g(e).css("top","-"+parseInt((e.height-c)/2)+"px")):(e.width=c*h,e.height=c,g(e).css("left",parseInt((b-e.width)/2)+"px")):"zoom"==a.thumbnails.crop?(e.height=c,e.width=c*h,g(e).css("left","-"+parseInt((e.width-b)/2)+"px")):(e.width=b,e.height=
    c/h,g(e).css("top",parseInt((c-e.height)/2)+"px"))):(0<b?e.width=b:0<c&&(e.width=c*h),0<c?e.height=c:0<b&&(e.height=b/h));g(e).show("slow")};a.thumbnails.div.append(d)},d.readAsDataURL(b[c]));try{var h=b[c];m.push(h);l.push(h);k()}catch(j){q()}}else alert("files api not supported")}var a=g.extend({},g.fn.uploader.defaults,h);a.dropZone=g(this);var j=!0,l=[],m=[],d=null,c=new XMLHttpRequest;null!=a.dropZone&&(a.dropZone.on("dragleave",r),a.dropZone.on("dragenter",s),a.dropZone.on("dragover",t),a.dropZone.on("drop",
    u));null!=a.fileField&&(a.dropZone.on("click",function(){a.fileField.trigger("click")}),"string"==typeof a.fileField&&(a.fileField=g(a.fileField)),a.fileField.on("change",y),!0==a.hideFileField&&a.fileField.hide());a.thumbnails&&("object"!=typeof a.thumbnails&&(h=null,"string"==typeof a.thumbnails&&(h=g(a.thumbnails)),a.thumbnails={div:h,width:null,height:null}),"string"==typeof a.thumbnails.div&&(a.thumbnails.div=g(a.thumbnails.div)),"object"==typeof a.thumbnails&&void 0==a.thumbnails.div&&(a.thumbnails.div=
    null),null==a.thumbnails.div&&(a.thumbnails.div=g('<div class="fileUploadThumbnails" />'),a.dropZone.after(a.thumbnails.div)));return this};g.fn.uploader.defaults={fileField:null,hideFileField:!0,url:null,thumbnails:{div:null,width:null,height:null},maxFileSize:0,allowDuplicate:!1,onFilesSelected:function(){return!1},onDragLeave:function(){return!1},onDragEnter:function(){return!1},onDragOver:function(){return!1},onDrop:function(){return!1},onUploadProgress:function(){return!1},beforeUpload:function(){return!0},
    afterUpload:function(){return!1},error:function(g){alert(g)},debug:!1}}(jQuery);
